# Accounting & Settlement

Within Drift Protocol, all token deposits are held in a global collateral vault for seamless cross-margin and borrow-lend. To ensure accurate user balances and settled claims, the protocol utilizes intermediate Pool Balances for transfers. Additionally, claimed gains must come from settled offsetting losses.

![High Level Architecture](public/assets/7o9CDj7ho4pmKHiTI8_aD_img9824.png)

### Perpetual Market Pools

An individual perpetual market has two pools:

- **P&L Pool:** accumulates funds from users with losses to settle claims of users with profits. This pool receives the highest priority for claimed funds.
- **Fee Pool:** accumulates a portion of exchange fees (determined by `SHARE_OF_ FEES_ALLOCATED_TO_CLEARING_HOUSE`) to cover operational costs. This pool is capped at 1% of settled losses used to fill the P&L Pool first.

The P&L Pool receives the highest priority on claimed funds, in order to give user's the best possible experience. The default fraction of exchange fees for the Fee Pool is `total_exchange_fee / 2` and this fraction is determined by: `SHARE_OF_FEES_ALLOCATED_TO_CLEARING_HOUSE`.

The Fee Pool will only get partially filled up by up to 1% of intermediate P&L settled from a user's losses and aggressively drawn down for the benefit of the P&L Pool otherwise.

### Spot Market Pools

An individual spot market has two pools:

- **Revenue Pool:** Accumulates revenue across the protocol in the specific token of the market. This pool can collect fees from various sources and distribute them as detailed in the Revenue Pool: /about-v2/revenue-pool section.
- **Fee Pool:** Collects exchange fees from swaps to pay out the Keeper Network.

The Revenue Pool can collect fees from:

-   Borrow interest

-   Liquidations

-   Perpetual Markets

and can pay out to

-   Insurance Fund Stakers

-   Perpetual Markets

(see details of these rules in [Revenue Pool](/about-v2/revenue-pool))

The Fee Pool collects exchange fees from swaps and uses them to pay out the Keeper Network [Keepers & Decentralised Orderbook](/about-v2/keepers-decentralized-orderbook-faq)

### Future Work: 

Currently, a Perpetual Market can only pull from the Spot Market Revenue Pool and Insurance Fund for its quote currency. In the future, distressed markets might be able to directly access funds from the associated Spot Market's revenue/insurance pool for immediate settlement.
